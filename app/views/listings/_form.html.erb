<%= form_with model: @listing, local: true do |form| %>
    <% if @listing.errors.any? %>
        <div id="error_explanation">
            <h2>
            <%= pluralize(@listing.errors.count, "error") %> prohibited
            this article from being saved:
            </h2>
            <ul>
            <% @listing.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
            <% end %>
            </ul>
        </div>
    <% end %>
    <div>
        <%= form.label :title %><br>
        <%= form.text_field :title %>
    </div>

    <div>
        <%= form.label :price %><br>
        <% @listing.price ? value = @listing.price / 100 : value = nil %>
        <%= form.number_field :price, { value: value, step: 1 } %>
        
    </div>

    <div>
        <%= form.label :category %><br>
        <%= form.collection_check_boxes(:categories, Category.all, :id, :name, { checked: @listing.categories.map(&:to_param), include_hidden: false }) %>
    </div>

     <div>
        <%= form.label :description %><br>
        <%= form.text_area :description %>
    </div>

    <div>
        <%= form.label :picture %> 
        <%= form.file_field :picture, accept: 'image/png,image/gif,image/jpeg,image/jpg' %>
    </div>

    <div>
        <%= form.submit 'Submit' %>
    </div>
<% end %>